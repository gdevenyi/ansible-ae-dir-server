---
# vars file for roles/ae-dir-server

# map real LSB id to another LSB id to be used during plays
lsb_id_map:
  openSUSE: "SUSE"
  RedHatEnterpriseServer: "CentOS"

# which Python interpreter to use
aedir_platform_python:
  CentOS: "{{ aedir_bin }}/python2"
  Debian: "{{ aedir_bin }}/python2"
  SUSE: "/usr/bin/python2"

# which repo to use for LTB OpenLDAP builds (Debian and RHEL/CentOS)
ltb_openldap_repo:
  CentOS: "https://ltb-project.org/rpm/$releasever/$basearch"
  Debian: "deb https://ltb-project.org/debian/{{ ansible_distribution_release }} {{ ansible_distribution_release }} main"

# which repos on https://download.opensuse.org to use for openSUSE or SLES versions
aedir_suse_repos:
  "SUSE Linux Enterprise Server 12 SP3":
    - name: "home_stroeder_AE-DIR"
      repo: "http://download.opensuse.org/repositories/home:/stroeder:/AE-DIR/SLE_12_SP3/"
    - name: "network_ldap"
      repo: "http://download.opensuse.org/repositories/network:/ldap/SLE_12_SP3/"
    - name: "Apache_Modules"
      repo: "http://download.opensuse.org/repositories/Apache:/Modules/SLE_12_SP3/"
    - name: "devel_languages_python"
      repo: "http://download.opensuse.org/repositories/devel:/languages:/python/SLE_12_SP3/"
  "openSUSE Leap 15.0":
    - name: "home_stroeder_AE-DIR"
      repo: "http://download.opensuse.org/repositories/home:/stroeder:/AE-DIR/openSUSE_Leap_15.0/"
    - name: "devel_languages_python"
      repo: "http://download.opensuse.org/repositories/devel:/languages:/python/openSUSE_Leap_15.0/"
  "openSUSE Leap 42.3":
    - name: "home_stroeder_AE-DIR"
      repo: "http://download.opensuse.org/repositories/home:/stroeder:/AE-DIR/openSUSE_Leap_42.3/"
    - name: "network_ldap"
      repo: "http://download.opensuse.org/repositories/network:/ldap/openSUSE_Leap_42.3/"
    - name: "devel_languages_python"
      repo: "http://download.opensuse.org/repositories/devel:/languages:/python/openSUSE_Leap_42.3/"
  "openSUSE Tumbleweed":
    - name: "home_stroeder_AE-DIR"
      repo: "http://download.opensuse.org/repositories/home:/stroeder:/AE-DIR/openSUSE_Tumbleweed/"
    - name: "devel_languages_python"
      repo: "http://download.opensuse.org/repositories/devel:/languages:/python/openSUSE_Tumbleweed/"

# OS-specific maps
os_openldap_paths:
  CentOS:
    # LTB-based installation
    openldap_prefix: /usr/local/openldap
    openldap_conf_prefix: /usr/local/openldap/etc/openldap
    openldap_data: /usr/local/openldap/var/openldap-data
    openldap_rundir: /usr/local/openldap/var/run
    openldap_slapd_exec: /usr/local/openldap/libexec/slapd
  Debian:
    # LTB-based installation
    openldap_prefix: /usr/local/openldap
    openldap_conf_prefix: /usr/local/openldap/etc/openldap
    openldap_data: /usr/local/openldap/var/openldap-data
    openldap_rundir: /usr/local/openldap/var/run
    openldap_slapd_exec: /usr/local/openldap/libexec/slapd
  SUSE:
    # openSUSE packages
    openldap_prefix: /usr
    openldap_conf_prefix: /etc/openldap
    openldap_data: /var/lib/ldap
    openldap_rundir: /var/run/slapd
    openldap_slapd_exec: /usr/sbin/slapd

cron_config:
  CentOS:
    service_name: "crond"
    pkg_name: "cronie"
  Debian:
    service_name: "cron"
    pkg_name: "cron"
  SUSE:
    service_name: "cron"
    pkg_name: "cron"

# conf_pathname: where to place the monolithic apache configuration file
# mod_dir: directory where Apache modules are found
# log_dir: directory where Apache logs are written to
# modules: which modules to load
apache2_config:
  CentOS:
    service_name: "httpd"
    user: "apache"
    group: "apache"
    pid_file: ""
    apache_ctl: "/usr/sbin/apachectl"
    conf_pathname: "/etc/httpd/conf/httpd.conf"
    mod_dir: "/usr/lib64/httpd/modules"
    log_dir: "/var/log/httpd"
    ssl_session_cache: "shmcb:/var/run/httpd/ssl_scache(512000)"
    modules:
      - socache_shmcb
      - env
      - unixd
      - dir
      - alias
      - ssl
      - mime
      - authz_core
      - authz_host
      - headers
      - deflate
      - filter
      - logio
      - log_config
      - mpm_worker
      - systemd
      - proxy
      - proxy_uwsgi
  Debian:
    service_name: "apache2"
    user: "www-data"
    group: "www-data"
    pid_file: "${APACHE_PID_FILE}"
    apache_ctl: "/usr/sbin/apache2ctl"
    conf_pathname: "/etc/apache2/apache2.conf"
    mod_dir: "/usr/lib/apache2/modules"
    log_dir: "/var/log/apache2"
    ssl_session_cache: "shmcb:/var/run/apache2/ssl_scache(512000)"
    modules:
      - mpm_prefork
      - socache_shmcb
      - env
      - dir
      - alias
      - ssl
      - mime
      - authz_core
      - authz_host
      - headers
      - deflate
      - filter
      - proxy
      - proxy_uwsgi
  SUSE:
    service_name: "apache2"
    user: "wwwrun"
    group: "www"
    pid_file: ""
    apache_ctl: "/usr/sbin/apache2ctl"
    conf_pathname: "/etc/apache2/httpd.conf"
    mod_dir: "/usr/lib64/apache2"
    log_dir: "/var/log/apache2"
    ssl_session_cache: "shmcb:/var/run/apache2/ssl_scache(512000)"
    modules:
      - socache_shmcb
      - env
      - dir
      - alias
      - ssl
      - mime
      - authz_core
      - authz_host
      - headers
      - deflate
      - filter
      - logio
      - proxy
      - proxy_uwsgi

# which uwsgi executable to use
uwsgi_exec:
  CentOS: "/usr/sbin/uwsgi"
  Debian: "/usr/bin/uwsgi"
  SUSE: "/usr/sbin/uwsgi"
