#-----------------------------------------------------------------------
# initiate:   systemctl enable passmod.service
# start:      systemctl start passmod.service
# get status: systemctl status passmod.service
#
# {{ ansible_managed }}
#-----------------------------------------------------------------------

[Unit]
Description=aedirpwd - Password change interceptor listener
Requires=network.target local-fs.target remote-fs.target
After=local-fs.target remote-fs.target network.target
#Wants=ldap.service
#After=ldap.service

[Service]
Type=simple
#PIDFile=
ExecStart={{ aedir_python }} {{ aedir_sbin }}/passmod.py "{{ pwsync_socket_path }}" "{{ openldap_ldapi_uri }}????x-saslmech=EXTERNAL"
User={{ pwsync_listener_user }}
Group={{ pwsync_listener_user }}

[Install]
WantedBy=multi-user.target
